import{z as $,a as c}from"./index-C0Wxbd9a.js";import{d as H,p as V,u as j,r as y,e as L,b as R,c as q,j as t,w as a,m as z,q as A,g as m,o as T,a as r,t as u,i as x,s as I}from"./index-BAwMGmj-.js";import{_ as O}from"./NikkInputText.vue_vue_type_script_setup_true_lang-8lhWVTWG.js";import{_ as D}from"./NikkInputPassword.vue_vue_type_script_setup_true_lang-CBdT_oow.js";import{N as M}from"./NikkToast-DqqY_v2-.js";import"./index-DSTbv2U6.js";const G={class:"w-full p-3 overflow-y-auto"},J={class:"text-center text-3xl md:text-4xl font-light mb-0"},K={class:"flex items-center justify-center"},Q={class:"font-light text-sm me-1"},U={class:"flex items-center justify-center"},W={class:"font-light text-sm me-1"},ae=H({__name:"IndexView",setup(X){const k=V(),C=j(),l=y(!1),d=z(),p=A(),S=L(),{t:B}=R(),i=new M(S,B),E=y({email:"",password:""}),F=$(c.object({email:c.string().email({message:"errors.validation.email"}),password:c.string().min(8,{message:"errors.validation.passwords.minCount"})}));async function N(e){var n;l.value=!0;try{e.valid?(await C.login(e.values),p.query.redirect?d.push(`${p.query.redirect}`):d.push(k.homeRoute)):i.error("errors.validation.form","labels.invalidForm")}catch(s){((n=s==null?void 0:s.response)==null?void 0:n.status)==422?i.error("messages.credentialsNotFound","labels.loginFailed"):i.httpError(s)}finally{l.value=!1}}return(e,n)=>{const s=m("PrimeButton"),f=m("router-link"),P=m("PrimeCard");return T(),q("div",G,[t(P,{class:"w-full md:w-4/12 2xl:w-3/12 mx-auto mt-10 nikk-card"},{title:a(()=>[r("div",null,[r("h1",J,u(e.$t("labels.login")),1),r("div",K,[r("span",Q,u(e.$t("hints.doNotHaveAccount")),1),t(f,{to:"/register",activeClass:"border-b border-primary"},{default:a(()=>[t(s,{text:"",label:e.$t("labels.register")},null,8,["label"])]),_:1})])])]),content:a(()=>[t(x(I),{class:"py-3 flex flex-col gap-5",initialValues:E.value,onSubmit:N,resolver:x(F),validateOnBlur:!0,validateOnSubmit:!0},{default:a(o=>{var b,_,v,g,w,h;return[t(O,{errorHelpLabel:(_=(b=o.email)==null?void 0:b.error)==null?void 0:_.message,id:"email",isError:(v=o.email)==null?void 0:v.invalid,label:"labels.email",name:"email",type:"email"},null,8,["errorHelpLabel","isError"]),t(D,{errorHelpLabel:(w=(g=o.password)==null?void 0:g.error)==null?void 0:w.message,id:"password",isError:(h=o.password)==null?void 0:h.invalid,label:"labels.password",name:"password",toggleMask:!0,feedback:!1},null,8,["errorHelpLabel","isError"]),r("div",U,[r("span",W,u(e.$t("hints.forgotPassword")),1),t(f,{to:"/forgot-password",activeClass:"border-b border-primary"},{default:a(()=>[t(s,{text:"",severity:"danger",label:e.$t("labels.resetPassword")},null,8,["label"])]),_:1})]),t(s,{type:"submit",loading:l.value,label:e.$t("labels.login")},null,8,["loading","label"])]}),_:1},8,["initialValues","resolver"])]),_:1})])}}});export{ae as default};
