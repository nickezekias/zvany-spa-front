import{z as B,a as _}from"./index-C0Wxbd9a.js";import{d as L,u as N,r as b,e as R,b as T,c as $,j as t,w as a,m as E,g as l,o as F,a as r,t as m,i as v,s as j,n as z}from"./index-BAwMGmj-.js";import{_ as D}from"./NikkInputText.vue_vue_type_script_setup_true_lang-8lhWVTWG.js";import{N as H}from"./NikkToast-DqqY_v2-.js";import"./index-DSTbv2U6.js";const I={class:"w-full p-3 overflow-y-auto"},M={class:"text-center"},O={class:"text-center text-3xl md:text-4xl font-light mb-0"},A={class:"flex items-center justify-center"},U={class:"font-light text-sm me-1"},X=L({__name:"IndexView",setup(q){const g=N(),n=b(!1),x=E(),k=R(),{t:h}=T(),i=new H(k,h),o=b({email:""}),w=B(_.object({email:_.string().email({message:"errors.validation.email"})}));async function y(e){n.value=!0;try{e.valid?(await g.sendPasswordResetLink(o.value.email),i.success("messages.passwordResetLinkSent"),x.push({name:"account.login"})):i.error("errors.validation.form","labels.invalidForm")}catch(s){i.httpError(s)}finally{n.value=!1}}return(e,s)=>{const P=l("PrimeMessage"),c=l("PrimeButton"),V=l("router-link"),C=l("PrimeCard");return F(),$("div",I,[t(C,{class:"w-full md:w-4/12 2xl:w-3/12 mx-auto mt-10 nikk-card"},{title:a(()=>[r("div",M,[r("h1",O,m(e.$t("labels.forgotPassword")),1)])]),content:a(()=>[t(v(j),{class:"py-3 flex flex-col gap-5",initialValues:o.value,onSubmit:y,resolver:v(w),validateOnBlur:!0,validateOnSubmit:!0},{default:a(u=>{var d,p,f;return[t(P,{class:"text text-muted font-light text-sm bock"},{default:a(()=>[z(m(e.$t("hints.forgotPasswordDesc")),1)]),_:1}),t(D,{modelValue:o.value.email,"onUpdate:modelValue":s[0]||(s[0]=S=>o.value.email=S),errorHelpLabel:(p=(d=u.email)==null?void 0:d.error)==null?void 0:p.message,id:"email",isError:(f=u.email)==null?void 0:f.invalid,label:"labels.email",name:"email",type:"email"},null,8,["modelValue","errorHelpLabel","isError"]),t(c,{type:"submit",loading:n.value,label:e.$t("labels.emailResetLink")},null,8,["loading","label"]),r("div",A,[r("span",U,m(e.$t("hints.backToLogin")),1),t(V,{to:"/login",activeClass:"border-b border-primary"},{default:a(()=>[t(c,{text:"",label:e.$t("labels.login")},null,8,["label"])]),_:1})])]}),_:1},8,["initialValues","resolver"])]),_:1})])}}});export{X as default};
