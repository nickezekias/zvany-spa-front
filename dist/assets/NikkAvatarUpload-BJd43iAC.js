import{d as be,N as Re,P as Ae,c as C,l as Oe,w as Pe,g,t as Te,e as F,j as De,F as Fe,i as ye,k as ue,r as W,X as Le,o as Me,f as je,a0 as fe,L as Ie,_ as He}from"./index-TzZah-E4.js";/*!
 * Compressor.js v1.2.1
 * https://fengyuanchen.github.io/compressorjs
 *
 * Copyright 2018-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2023-02-28T14:09:41.732Z
 */function he(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);e&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,a)}return t}function L(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?he(Object(t),!0).forEach(function(a){Se(r,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):he(Object(t)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(t,a))})}return r}function ze(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function de(r,e){for(var t=0;t<e.length;t++){var a=e[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,we(a.key),a)}}function _e(r,e,t){return de(r.prototype,e),de(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function Se(r,e,t){return e=we(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function M(){return M=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},M.apply(this,arguments)}function We(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var a=t.call(r,e||"default");if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function we(r){var e=We(r,"string");return typeof e=="symbol"?e:String(e)}var xe={exports:{}};(function(r){typeof window>"u"||function(e){var t=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype,a=e.Blob&&function(){try{return!!new Blob}catch{return!1}}(),n=a&&e.Uint8Array&&function(){try{return new Blob([new Uint8Array(100)]).size===100}catch{return!1}}(),i=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder,f=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,c=(a||i)&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&function(s){var l,v,h,d,u,o,p,m,w;if(l=s.match(f),!l)throw new Error("invalid data URI");for(v=l[2]?l[1]:"text/plain"+(l[3]||";charset=US-ASCII"),h=!!l[4],d=s.slice(l[0].length),h?u=atob(d):u=decodeURIComponent(d),o=new ArrayBuffer(u.length),p=new Uint8Array(o),m=0;m<u.length;m+=1)p[m]=u.charCodeAt(m);return a?new Blob([n?p:o],{type:v}):(w=new i,w.append(o),w.getBlob(v))};e.HTMLCanvasElement&&!t.toBlob&&(t.mozGetAsFile?t.toBlob=function(s,l,v){var h=this;setTimeout(function(){v&&t.toDataURL&&c?s(c(h.toDataURL(l,v))):s(h.mozGetAsFile("blob",l))})}:t.toDataURL&&c&&(t.msToBlob?t.toBlob=function(s,l,v){var h=this;setTimeout(function(){(l&&l!=="image/png"||v)&&t.toDataURL&&c?s(c(h.toDataURL(l,v))):s(h.msToBlob(l))})}:t.toBlob=function(s,l,v){var h=this;setTimeout(function(){s(c(h.toDataURL(l,v)))})})),r.exports?r.exports=c:e.dataURLtoBlob=c}(window)})(xe);var ve=xe.exports,Ve=function(e){return typeof Blob>"u"?!1:e instanceof Blob||Object.prototype.toString.call(e)==="[object Blob]"},me={strict:!0,checkOrientation:!0,retainExif:!1,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},Ne=typeof window<"u"&&typeof window.document<"u",x=Ne?window:{},j=function(e){return e>0&&e<1/0},$e=Array.prototype.slice;function $(r){return Array.from?Array.from(r):$e.call(r)}var Ge=/^image\/.+$/;function N(r){return Ge.test(r)}function Xe(r){var e=N(r)?r.substr(6):"";return e==="jpeg"&&(e="jpg"),".".concat(e)}var Be=String.fromCharCode;function Ye(r,e,t){var a="",n;for(t+=e,n=e;n<t;n+=1)a+=Be(r.getUint8(n));return a}var Ke=x.btoa;function ge(r,e){for(var t=[],a=8192,n=new Uint8Array(r);n.length>0;)t.push(Be.apply(null,$(n.subarray(0,a)))),n=n.subarray(a);return"data:".concat(e,";base64,").concat(Ke(t.join("")))}function qe(r){var e=new DataView(r),t;try{var a,n,i;if(e.getUint8(0)===255&&e.getUint8(1)===216)for(var f=e.byteLength,c=2;c+1<f;){if(e.getUint8(c)===255&&e.getUint8(c+1)===225){n=c;break}c+=1}if(n){var s=n+4,l=n+10;if(Ye(e,s,4)==="Exif"){var v=e.getUint16(l);if(a=v===18761,(a||v===19789)&&e.getUint16(l+2,a)===42){var h=e.getUint32(l+4,a);h>=8&&(i=l+h)}}}if(i){var d=e.getUint16(i,a),u,o;for(o=0;o<d;o+=1)if(u=i+o*12+2,e.getUint16(u,a)===274){u+=8,t=e.getUint16(u,a),e.setUint16(u,1,a);break}}}catch{t=1}return t}function Je(r){var e=0,t=1,a=1;switch(r){case 2:t=-1;break;case 3:e=-180;break;case 4:a=-1;break;case 5:e=90,a=-1;break;case 6:e=90;break;case 7:e=90,t=-1;break;case 8:e=-90;break}return{rotate:e,scaleX:t,scaleY:a}}var Qe=/\.\d*(?:0|9){12}\d*$/;function pe(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return Qe.test(r)?Math.round(r*e)/e:r}function D(r){var e=r.aspectRatio,t=r.height,a=r.width,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none",i=j(a),f=j(t);if(i&&f){var c=t*e;(n==="contain"||n==="none")&&c>a||n==="cover"&&c<a?t=a/e:a=t*e}else i?t=a/e:f&&(a=t*e);return{width:a,height:t}}function Ze(r){for(var e=$(new Uint8Array(r)),t=e.length,a=[],n=0;n+3<t;){var i=e[n],f=e[n+1];if(i===255&&f===218)break;if(i===255&&f===216)n+=2;else{var c=e[n+2]*256+e[n+3],s=n+c+2,l=e.slice(n,s);a.push(l),n=s}}return a.reduce(function(v,h){return h[0]===255&&h[1]===225?v.concat(h):v},[])}function et(r,e){var t=$(new Uint8Array(r));if(t[2]!==255||t[3]!==224)return r;var a=t[4]*256+t[5],n=[255,216].concat(e,t.slice(4+a));return new Uint8Array(n)}var tt=x.ArrayBuffer,V=x.FileReader,B=x.URL||x.webkitURL,at=/\.\w+$/,rt=x.Compressor,it=function(){function r(e,t){ze(this,r),this.file=e,this.exif=[],this.image=new Image,this.options=L(L({},me),t),this.aborted=!1,this.result=null,this.init()}return _e(r,[{key:"init",value:function(){var t=this,a=this.file,n=this.options;if(!Ve(a)){this.fail(new Error("The first argument must be a File or Blob object."));return}var i=a.type;if(!N(i)){this.fail(new Error("The first argument must be an image File or Blob object."));return}if(!B||!V){this.fail(new Error("The current browser does not support image compression."));return}tt||(n.checkOrientation=!1,n.retainExif=!1);var f=i==="image/jpeg",c=f&&n.checkOrientation,s=f&&n.retainExif;if(B&&!c&&!s)this.load({url:B.createObjectURL(a)});else{var l=new V;this.reader=l,l.onload=function(v){var h=v.target,d=h.result,u={},o=1;c&&(o=qe(d),o>1&&M(u,Je(o))),s&&(t.exif=Ze(d)),c||s?!B||o>1?u.url=ge(d,i):u.url=B.createObjectURL(a):u.url=d,t.load(u)},l.onabort=function(){t.fail(new Error("Aborted to read the image with FileReader."))},l.onerror=function(){t.fail(new Error("Failed to read the image with FileReader."))},l.onloadend=function(){t.reader=null},c||s?l.readAsArrayBuffer(a):l.readAsDataURL(a)}}},{key:"load",value:function(t){var a=this,n=this.file,i=this.image;i.onload=function(){a.draw(L(L({},t),{},{naturalWidth:i.naturalWidth,naturalHeight:i.naturalHeight}))},i.onabort=function(){a.fail(new Error("Aborted to load the image."))},i.onerror=function(){a.fail(new Error("Failed to load the image."))},x.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(x.navigator.userAgent)&&(i.crossOrigin="anonymous"),i.alt=n.name,i.src=t.url}},{key:"draw",value:function(t){var a=this,n=t.naturalWidth,i=t.naturalHeight,f=t.rotate,c=f===void 0?0:f,s=t.scaleX,l=s===void 0?1:s,v=t.scaleY,h=v===void 0?1:v,d=this.file,u=this.image,o=this.options,p=document.createElement("canvas"),m=p.getContext("2d"),w=Math.abs(c)%180===90,I=(o.resize==="contain"||o.resize==="cover")&&j(o.width)&&j(o.height),E=Math.max(o.maxWidth,0)||1/0,R=Math.max(o.maxHeight,0)||1/0,A=Math.max(o.minWidth,0)||0,O=Math.max(o.minHeight,0)||0,U=n/i,b=o.width,y=o.height;if(w){var G=[R,E];E=G[0],R=G[1];var X=[O,A];A=X[0],O=X[1];var Y=[y,b];b=Y[0],y=Y[1]}I&&(U=b/y);var K=D({aspectRatio:U,width:E,height:R},"contain");E=K.width,R=K.height;var q=D({aspectRatio:U,width:A,height:O},"cover");if(A=q.width,O=q.height,I){var J=D({aspectRatio:U,width:b,height:y},o.resize);b=J.width,y=J.height}else{var Q=D({aspectRatio:U,width:b,height:y}),Z=Q.width;b=Z===void 0?n:Z;var ee=Q.height;y=ee===void 0?i:ee}b=Math.floor(pe(Math.min(Math.max(b,A),E))),y=Math.floor(pe(Math.min(Math.max(y,O),R)));var Ue=-b/2,ke=-y/2,Ce=b,Ee=y,H=[];if(I){var te=0,ae=0,z=n,_=i,re=D({aspectRatio:U,width:n,height:i},{contain:"cover",cover:"contain"}[o.resize]);z=re.width,_=re.height,te=(n-z)/2,ae=(i-_)/2,H.push(te,ae,z,_)}if(H.push(Ue,ke,Ce,Ee),w){var ie=[y,b];b=ie[0],y=ie[1]}p.width=b,p.height=y,N(o.mimeType)||(o.mimeType=d.type);var ne="transparent";d.size>o.convertSize&&o.convertTypes.indexOf(o.mimeType)>=0&&(o.mimeType="image/jpeg");var oe=o.mimeType==="image/jpeg";if(oe&&(ne="#fff"),m.fillStyle=ne,m.fillRect(0,0,b,y),o.beforeDraw&&o.beforeDraw.call(this,m,p),!this.aborted&&(m.save(),m.translate(b/2,y/2),m.rotate(c*Math.PI/180),m.scale(l,h),m.drawImage.apply(m,[u].concat(H)),m.restore(),o.drew&&o.drew.call(this,m,p),!this.aborted)){var se=function(P){if(!a.aborted){var le=function(T){return a.done({naturalWidth:n,naturalHeight:i,result:T})};if(P&&oe&&o.retainExif&&a.exif&&a.exif.length>0){var ce=function(T){return le(ve(ge(et(T,a.exif),o.mimeType)))};if(P.arrayBuffer)P.arrayBuffer().then(ce).catch(function(){a.fail(new Error("Failed to read the compressed image with Blob.arrayBuffer()."))});else{var k=new V;a.reader=k,k.onload=function(S){var T=S.target;ce(T.result)},k.onabort=function(){a.fail(new Error("Aborted to read the compressed image with FileReader."))},k.onerror=function(){a.fail(new Error("Failed to read the compressed image with FileReader."))},k.onloadend=function(){a.reader=null},k.readAsArrayBuffer(P)}}else le(P)}};p.toBlob?p.toBlob(se,o.mimeType,o.quality):se(ve(p.toDataURL(o.mimeType,o.quality)))}}},{key:"done",value:function(t){var a=t.naturalWidth,n=t.naturalHeight,i=t.result,f=this.file,c=this.image,s=this.options;if(B&&c.src.indexOf("blob:")===0&&B.revokeObjectURL(c.src),i)if(s.strict&&!s.retainExif&&i.size>f.size&&s.mimeType===f.type&&!(s.width>a||s.height>n||s.minWidth>a||s.minHeight>n||s.maxWidth<a||s.maxHeight<n))i=f;else{var l=new Date;i.lastModified=l.getTime(),i.lastModifiedDate=l,i.name=f.name,i.name&&i.type!==f.type&&(i.name=i.name.replace(at,Xe(i.type)))}else i=f;this.result=i,s.success&&s.success.call(this,i)}},{key:"fail",value:function(t){var a=this.options;if(a.error)a.error.call(this,t);else throw t}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],[{key:"noConflict",value:function(){return window.Compressor=rt,r}},{key:"setDefaults",value:function(t){M(me,t)}}]),r}();const nt={class:"overflow-y-auto"},ot={class:"font-bold text-lg"},st={class:"content"},lt={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},ct={class:"actions"},ut={class:"flex justify-end"},ft=be({__name:"ImageGrid",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:Re(["close","selectedImage"],["update:modelValue"]),setup(r,{emit:e}){const t=e,a=Ae(r,"modelValue");return(n,i)=>{const f=ue("PrimeButton"),c=ue("PrimeDialog");return C(),Oe(c,{class:"p-4",visible:a.value,"onUpdate:visible":i[1]||(i[1]=s=>a.value=s),modal:""},{container:Pe(()=>[g("div",nt,[g("h3",ot,Te(n.$t("labels.imageLibrary")),1),g("div",st,[g("div",lt,[(C(),F(Fe,null,De(5,s=>g("div",{key:s,class:"bg-gray-100 h-64"})),64))])]),g("div",ct,[g("div",ut,[ye(f,{onClick:i[0]||(i[0]=s=>t("selectedImage")),label:n.$t("labels.save"),size:"large"},null,8,["label"])])])])]),_:1},8,["visible"])}}}),ht=["src"],dt={key:1,xmlns:"http://www.w3.org/2000/svg",class:"w-64 mx-auto",viewBox:"0 0 24 24"},vt={class:"action-buttons"},mt=be({__name:"NikkAvatarUpload",props:{isCompress:{type:Boolean,default:!0},rounded:{type:Boolean,default:!1},url:{type:String,default:""}},emits:["file-selected","file-cleared"],setup(r,{emit:e}){const t=r,a=e,n=W(!1),i=W(null),f=W(null),c=Le(()=>t.rounded?"image-preview--rounded":"image-preview--square");Me(()=>{t.url&&(i.value=t.url)});const s=h=>{var p;const u=(p=h.target.files)==null?void 0:p[0],o=[];u&&(i.value=URL.createObjectURL(u),u.size>2000048&&new it(u,{quality:.6,maxWidth:1920,maxHeight:1080,success(m){const w=m;w.name=u.name,o.push(w),a("file-selected",o[0])},error(m){a("file-selected",u),console.error("Compression failed:",m.message)}}))},l=()=>{var h;(h=f.value)==null||h.click()},v=()=>{i.value=null,a("file-cleared")};return(h,d)=>(C(),F("div",{class:fe(["avatar-upload",c.value])},[g("div",{class:fe(["image-preview",c.value])},[i.value?(C(),F("img",{key:0,src:i.value,alt:"Avatar"},null,8,ht)):(C(),F("svg",dt,d[2]||(d[2]=[je('<g fill="none" stroke="#d0d7d5" stroke-width="1.5" data-v-545d9980><path d="M2.384 13.793c-.447-3.164-.67-4.745.278-5.77C3.61 7 5.298 7 8.672 7h6.656c3.374 0 5.062 0 6.01 1.024c.947 1.024.724 2.605.278 5.769l-.422 3c-.35 2.48-.525 3.721-1.422 4.464c-.897.743-2.22.743-4.867.743h-5.81c-2.646 0-3.97 0-4.867-.743c-.897-.743-1.072-1.983-1.422-4.464z" data-v-545d9980></path><path d="M19.562 7a2.132 2.132 0 0 0-2.1-2.5H6.538a2.132 2.132 0 0 0-2.1 2.5M17.5 4.5c.028-.26.043-.389.043-.496a2 2 0 0 0-1.787-1.993C15.65 2 15.52 2 15.26 2H8.74c-.26 0-.391 0-.497.011a2 2 0 0 0-1.787 1.993c0 .107.014.237.043.496" opacity="0.5" data-v-545d9980></path><circle cx="16.5" cy="11.5" r="1.5" opacity="0.5" data-v-545d9980></circle><path stroke-linecap="round" d="m20 20l-2.884-2.149c-.93-.692-2.316-.761-3.34-.166l-.266.155c-.712.414-1.68.345-2.294-.164l-3.839-3.177c-.766-.634-1.995-.668-2.81-.078l-1.324.96" opacity="0.5" data-v-545d9980></path></g>',1)])))],2),g("div",vt,[g("button",{onClick:l,class:"action-btn",title:"Change photo",type:"button"},d[3]||(d[3]=[g("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24",fill:"currentColor"},[g("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zm2.92.92L14.06 9.06l1.77 1.77L7.69 20.44H5.92v-1.77zM20.71 7.04a1.004 1.004 0 0 0 0-1.42l-2.34-2.34a1.004 1.004 0 0 0-1.42 0l-1.83 1.83 3.75 3.75 1.84-1.82z"})],-1)])),i.value?(C(),F("button",{key:0,onClick:v,class:"action-btn delete-btn",title:"Delete photo",type:"button"},d[4]||(d[4]=[g("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24",fill:"currentColor"},[g("path",{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-4.5l-1-1z"})],-1)]))):Ie("",!0),g("button",{onClick:d[0]||(d[0]=u=>n.value=!0),class:"action-btn",title:"Change photo with img library",type:"button"},d[5]||(d[5]=[g("i",{class:"pi pi-folder"},null,-1)]))]),g("input",{ref_key:"fileInput",ref:f,type:"file",accept:"image/*",onChange:s,class:"hidden"},null,544),ye(ft,{modelValue:n.value,"onUpdate:modelValue":d[1]||(d[1]=u=>n.value=u),class:"w-full mx-2 md:mx-0 md:w-8/12"},null,8,["modelValue"])],2))}}),bt=He(mt,[["__scopeId","data-v-545d9980"]]);export{bt as N};
