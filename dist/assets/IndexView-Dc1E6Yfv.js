import{S as U,V as J,d as K,u as M,b as Q,a as R,r as c,W as X,c as h,e as N,l as Y,i as o,g as n,t as y,w as p,k as g,_ as Z}from"./index-TzZah-E4.js";import{N as ee}from"./NikkToast-J5MSWPIm.js";import{_ as se}from"./AppPageTitle.vue_vue_type_script_setup_true_lang-DZaUeOML.js";import{N as D}from"./NikkAvatarUpload-BJd43iAC.js";import{_ as v}from"./NikkInputText.vue_vue_type_script_setup_true_lang-C4JC_fEl.js";import"./helpers-B5xRNGEM.js";import"./index-Dj5bUBQz.js";const $="api/v1/businesses",ae=async function(t){const r=new FormData;return r.append("coverImage",t.coverImage),U.post(`${$}/${t.id}/cover-image?_method=PUT`,r)},oe=async function(t){const r=new FormData;return console.log("THE LOGO",t.logo),r.append("logo",t.logo),U.post(`${$}/${t.id}/logo?_method=PUT`,r)},T={updateCoverImage:ae,updateLogo:oe},le=J("businessStore",()=>{async function t(u){await T.updateCoverImage(u)}async function r(u){await T.updateLogo(u)}return{updateCoverImage:t,updateLogo:r}}),te={key:1,class:"nikk-container"},re={class:"content"},ne={class:"flex flex-col md:flex-row md:justify-between items-center gap-4 md:gap-6 mt-6"},ie={class:"flex-grow"},ue={class:"text-muted-color font-thin mb-2"},de={class:"h-full flex"},me={class:"w-64"},ce={class:"text-muted-color font-thin mb-2 text-cente"},pe={class:"h-full flex"},ge=K({__name:"IndexView",setup(t){var L;const r=M(),u=le(),O=Q(),{t:m}=R(),d=new ee(O,m),f=c(!1),b=c(!1),j=c(!1),e=c(((L=r.user)==null?void 0:L.business)||X.initEmpty());async function q(){f.value=!0;try{if(!e.value.coverImage){d.error("errors.validation.requiredField",m("features.businesses.changeStoreCoverImage"));return}await u.updateCoverImage(e.value),d.success("messages.updatedSuccessfully")}catch(l){d.httpError(l)}finally{f.value=!1}}async function A(){b.value=!0;try{if(!e.value.logo){d.error(m("errors.validation.requiredField"),m("features.businesses.changeStoreLogo"));return}await u.updateLogo(e.value),d.success("messages.updatedSuccessfully")}catch(l){d.httpError(l)}finally{b.value=!1}}return(l,a)=>{const G=g("PrimeSkeleton"),_=g("PrimeButton"),W=g("PrimeForm"),z=g("PrimeCard");return h(),N("div",null,[j.value?(h(),Y(G,{key:0,width:"100%",height:"80%"})):(h(),N("div",te,[o(se,{title:"features.businesses.businessSettings",subtitle:"features.businesses.businessSettingsDesc"}),n("div",re,[n("div",ne,[n("div",ie,[n("h3",ue,y(l.$t("features.businesses.changeStoreCoverImage")),1),o(D,{class:"h-48 border w-full",url:e.value.coverImage?`${e.value.coverImage}`:"",onFileSelected:a[0]||(a[0]=s=>{e.value.coverImage=s})},null,8,["url"]),n("div",de,[o(_,{onClick:q,class:"mt-2 ml-auto",loading:f.value,outlined:"",type:"submit",label:l.$t("features.businesses.updateCoverImage")},null,8,["loading","label"])])]),n("div",me,[n("h3",ce,y(l.$t("features.businesses.changeStoreLogo")),1),o(D,{class:"border",url:e.value.logo?`${e.value.logo}`:"",onFileSelected:a[1]||(a[1]=s=>{e.value.logo=s,console.log("THE LOGO",e.value.logo,s)})},null,8,["url"]),n("div",pe,[o(_,{onClick:A,class:"mt-2 ml-auto",loading:b.value,outlined:"",type:"submit",label:l.$t("features.businesses.updateLogo")},null,8,["loading","label"])])])]),o(z,{class:"store-details mt-16 border w-full md:w-5/12 lg:w-4/12 md:mx-auto"},{title:p(()=>[n("span",null,y(l.$t("features.businesses.storeDetails")),1)]),content:p(()=>[o(W,{initialValues:e.value,class:"flex flex-col gap-5"},{default:p(s=>{var S,w,I,V,k,x,C,E,H,P,B,F;return[o(v,{modelValue:e.value.name,"onUpdate:modelValue":a[2]||(a[2]=i=>e.value.name=i),errorHelpLabel:(w=(S=s.name)==null?void 0:S.error)==null?void 0:w.message,id:"last-name",isError:(I=s.name)==null?void 0:I.invalid,label:"labels.lastName",name:"lastName",type:"text"},null,8,["modelValue","errorHelpLabel","isError"]),o(v,{modelValue:e.value.email,"onUpdate:modelValue":a[3]||(a[3]=i=>e.value.email=i),errorHelpLabel:(k=(V=s.email)==null?void 0:V.error)==null?void 0:k.message,id:"email",isError:(x=s.email)==null?void 0:x.invalid,label:"labels.email",name:"email",type:"email"},null,8,["modelValue","errorHelpLabel","isError"]),o(v,{modelValue:e.value.phone,"onUpdate:modelValue":a[4]||(a[4]=i=>e.value.phone=i),errorHelpLabel:(E=(C=s.phone)==null?void 0:C.error)==null?void 0:E.message,id:"phone",isError:(H=s.phone)==null?void 0:H.invalid,label:"labels.phone",name:"phone",type:"text"},null,8,["modelValue","errorHelpLabel","isError"]),o(v,{modelValue:e.value.address,"onUpdate:modelValue":a[5]||(a[5]=i=>e.value.address=i),errorHelpLabel:(B=(P=s.address)==null?void 0:P.error)==null?void 0:B.message,id:"address",isError:(F=s.address)==null?void 0:F.invalid,label:"labels.address",name:"address",type:"text"},null,8,["modelValue","errorHelpLabel","isError"])]}),_:1},8,["initialValues"])]),footer:p(()=>[o(_,{class:"mt-6",fluid:"",type:"submit",label:l.$t("labels.edit")},null,8,["label"])]),_:1})])]))])}}}),Se=Z(ge,[["__scopeId","data-v-bd54df2e"]]);export{Se as default};
