import{d as ae,u as se,b as oe,a as te,r as v,o as ie,c as ne,e as ue,i as s,w as b,h as g,g as n,q as de,n as me,k as V,s as pe}from"./index-DRnyeG6s.js";import{u as ce,P as ve}from"./product.store-BQDZJdNa.js";import{u as be}from"./store.store-BF0KjU8Z.js";import{z as ge,a as o}from"./index-Dw--k9e-.js";import{N as Ve}from"./NikkToast-J5MSWPIm.js";import{_ as ye,p as fe}from"./NikkTextArea.vue_vue_type_script_setup_true_lang-CjaMI2Dk.js";import{_ as _e}from"./AppPageTitle.vue_vue_type_script_setup_true_lang-DxKTaOqs.js";import{N as ke}from"./NikkAvatarUpload-DizMwvhs.js";import{_ as y}from"./NikkInputNumber.vue_vue_type_script_setup_true_lang-C0MrmAFw.js";import{_ as p}from"./NikkInputText.vue_vue_type_script_setup_true_lang-B3mRpk61.js";import{_ as qe}from"./NikkSelect.vue_vue_type_script_setup_true_lang-BMZnBWT7.js";import"./helpers-B5xRNGEM.js";import"./index-U2ik_GpQ.js";import"./index-Dzto26B4.js";import"./index-Bzo-7GMa.js";const Fe={class:"nikk-container"},he={class:"flex flex-col md:flex-row gap-4"},we={class:"w-full lg:w-4/12"},Se={class:"w-full flex flex-col lg:w-8/12 gap-4"},xe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ee={class:"flex justify-end pt-6 gap-4"},Ge=ae({__name:"CreateView",setup(Ue){const X=se(),f=ce(),Y=de(),Z=me(),$=oe(),{t:ee}=te(),_=be(),u=new Ve($,ee),c=v(!1),e=v(ve.initEmpty()),k=v(!1),re=ge(o.object({brand:o.string().min(1,{message:"errors.validation.requiredField"}),categories:o.string().min(1,{message:"errors.validation.requiredField"}),cost:o.union([o.number().min(0,{message:"errors.validation.requiredField"}),o.string().min(0,{message:"errors.validation.requiredField"})]),description:o.string().min(1,{message:"errors.validation.requiredField"}),name:o.string().min(1,{message:"errors.validation.requiredField"}),price:o.union([o.number().min(0,{message:"errors.validation.requiredField"}),o.string().min(0,{message:"errors.validation.requiredField"})]),quantity:o.union([o.number().min(0,{message:"errors.validation.requiredField"}),o.string().min(0,{message:"errors.validation.requiredField"})]),sku:o.string().min(1,{message:"errors.validation.requiredField"}),type:o.string().min(1,{message:"errors.validation.requiredField"})}));ie(async()=>{const t=Y.query.cloneId;if(t&&t.length==36){k.value=!0;try{e.value=await f.get(`${t}`),e.value.images=""}catch(r){u.httpError(r)}finally{k.value=!1}}});async function le(t){var i,d;if(t.valid){c.value=!0;try{e.value.barcode=e.value.sku,e.value.businessId=`${(d=(i=X.user)==null?void 0:i.business)==null?void 0:d.id}`,await f.create(e.value),u.success("features.vendors.products.create.successMessage"),Z.push({name:"vendors.products.index"})}catch(m){_.setErrors(m),console.warn("VENDOR_STORE_STORE ERRORS",_.errors),u.httpError(m)}finally{c.value=!1}}else u.error("errors.validation.form","labels.invalidForm")}return(t,r)=>{const i=V("PrimeButton"),d=V("router-link"),m=V("PrimeCard");return ne(),ue("div",Fe,[s(_e,{title:"features.vendors.products.create.title",subtitle:"features.vendors.products.create.subtitle"}),s(m,{class:"vendor-card"},{content:b(()=>[s(g(pe),{initialValues:e.value,resolver:g(re),onSubmit:le,validateOnBlur:!0,validateOnSubmit:!0},{default:b(a=>{var q,F,h,w,S,x,E,U,P,R,T,C,N,B,O,H,L,j,I,z,A,M,D,G,J,K,Q,W;return[n("div",he,[n("div",we,[s(ke,{class:"h-96 border",onFileSelected:r[0]||(r[0]=l=>{e.value.images=l})})]),n("div",Se,[s(p,{modelValue:e.value.name,"onUpdate:modelValue":r[1]||(r[1]=l=>e.value.name=l),errorHelpLabel:(F=(q=a.name)==null?void 0:q.error)==null?void 0:F.message,id:"product-name",isError:(h=a.name)==null?void 0:h.invalid,label:"labels.name",name:"name",type:"text"},null,8,["modelValue","errorHelpLabel","isError"]),n("div",xe,[s(p,{modelValue:e.value.sku,"onUpdate:modelValue":r[2]||(r[2]=l=>e.value.sku=l),id:"sku","error-help-label":(S=(w=a.sku)==null?void 0:w.error)==null?void 0:S.message,"is-error":(x=a.sku)==null?void 0:x.invalid,label:"labels.sku",name:"sku",type:"text"},null,8,["modelValue","error-help-label","is-error"]),s(qe,{modelValue:e.value.type,"onUpdate:modelValue":r[3]||(r[3]=l=>e.value.type=l),id:"type","error-help-label":(U=(E=a.type)==null?void 0:E.error)==null?void 0:U.message,hint:"labels.selectProductType","is-error":(P=a.type)==null?void 0:P.invalid,label:"labels.productType",name:"type",options:g(fe),placeholder:"labels.selectProductType"},null,8,["modelValue","error-help-label","is-error","options"]),s(p,{modelValue:e.value.brand,"onUpdate:modelValue":r[4]||(r[4]=l=>e.value.brand=l),id:"brand","error-help-label":(T=(R=a.brand)==null?void 0:R.error)==null?void 0:T.message,"is-error":(N=(C=a.brand)==null?void 0:C.error)==null?void 0:N.message,label:"labels.brand",name:"brand",type:"text"},null,8,["modelValue","error-help-label","is-error"]),s(p,{modelValue:e.value.categories,"onUpdate:modelValue":r[5]||(r[5]=l=>e.value.categories=l),id:"categories","error-help-label":(O=(B=a.categories)==null?void 0:B.error)==null?void 0:O.message,"is-error":(H=a.categories)==null?void 0:H.invalid,label:"labels.categories",name:"categories",type:"text"},null,8,["modelValue","error-help-label","is-error"]),s(y,{modelValue:e.value.quantity,"onUpdate:modelValue":r[6]||(r[6]=l=>e.value.quantity=l),id:"quantity","error-help-label":(j=(L=a.quantity)==null?void 0:L.error)==null?void 0:j.message,"is-error":(I=a.quantity)==null?void 0:I.invalid,label:"labels.quantity",min:0,name:"quantity","show-buttons":!0},null,8,["modelValue","error-help-label","is-error"]),s(y,{modelValue:e.value.cost,"onUpdate:modelValue":r[7]||(r[7]=l=>e.value.cost=l),id:"cost","error-help-label":(A=(z=a.cost)==null?void 0:z.error)==null?void 0:A.message,"is-error":(M=a.cost)==null?void 0:M.invalid,label:"labels.cost",min:0,name:"cost","show-buttons":!0},null,8,["modelValue","error-help-label","is-error"]),s(y,{modelValue:e.value.price,"onUpdate:modelValue":r[8]||(r[8]=l=>e.value.price=l),id:"price","error-help-label":(G=(D=a.price)==null?void 0:D.error)==null?void 0:G.message,"is-error":(J=a.price)==null?void 0:J.invalid,label:"labels.price",min:0,name:"price","show-buttons":!0},null,8,["modelValue","error-help-label","is-error"])]),s(ye,{modelValue:e.value.description,"onUpdate:modelValue":r[9]||(r[9]=l=>e.value.description=l),errorHelpLabel:(Q=(K=a.description)==null?void 0:K.error)==null?void 0:Q.message,hint:"features.vendors.products.create.descriptionHint",id:"description",isError:(W=a.description)==null?void 0:W.invalid,label:"labels.description",name:"description"},null,8,["modelValue","errorHelpLabel","isError"]),n("div",Ee,[s(d,{to:"/vendors/products"},{default:b(()=>[s(i,{text:"",label:t.$t("labels.cancel")},null,8,["label"])]),_:1}),s(i,{type:"submit",loading:c.value,label:t.$t("labels.save")},null,8,["loading","label"])])])])]}),_:1},8,["initialValues","resolver"])]),_:1})])}}});export{Ge as default};
