import{z as B,a as _}from"./index-BXVFKw3L.js";import{d as L,u as N,r as b,b as R,a as T,c as $,e as E,i as t,w as a,g as l,t as m,h as v,m as F,n as z,k as r,s as j}from"./index-TzZah-E4.js";import{_ as D}from"./NikkInputText.vue_vue_type_script_setup_true_lang-C4JC_fEl.js";import{N as H}from"./NikkToast-J5MSWPIm.js";import"./index-Dj5bUBQz.js";import"./helpers-B5xRNGEM.js";const I={class:"w-full p-3 overflow-y-auto"},M={class:"text-center"},O={class:"text-center text-3xl md:text-4xl font-light mb-0"},A={class:"flex items-center justify-center"},U={class:"font-light text-sm me-1"},Y=L({__name:"IndexView",setup(q){const g=N(),i=b(!1),k=z(),x=R(),{t:h}=T(),n=new H(x,h),o=b({email:""}),w=B(_.object({email:_.string().email({message:"errors.validation.email"})}));async function y(e){i.value=!0;try{e.valid?(await g.sendPasswordResetLink(o.value.email),n.success("messages.passwordResetLinkSent"),k.push({name:"account.login"})):n.error("errors.validation.form","labels.invalidForm")}catch(s){n.httpError(s)}finally{i.value=!1}}return(e,s)=>{const P=r("PrimeMessage"),c=r("PrimeButton"),V=r("router-link"),C=r("PrimeCard");return $(),E("div",I,[t(C,{class:"w-full md:w-4/12 2xl:w-3/12 mx-auto mt-10 nikk-card"},{title:a(()=>[l("div",M,[l("h1",O,m(e.$t("labels.forgotPassword")),1)])]),content:a(()=>[t(v(j),{class:"py-3 flex flex-col gap-5",initialValues:o.value,onSubmit:y,resolver:v(w),validateOnBlur:!0,validateOnSubmit:!0},{default:a(u=>{var d,p,f;return[t(P,{class:"text text-muted font-light text-sm bock"},{default:a(()=>[F(m(e.$t("hints.forgotPasswordDesc")),1)]),_:1}),t(D,{modelValue:o.value.email,"onUpdate:modelValue":s[0]||(s[0]=S=>o.value.email=S),errorHelpLabel:(p=(d=u.email)==null?void 0:d.error)==null?void 0:p.message,id:"email",isError:(f=u.email)==null?void 0:f.invalid,label:"labels.email",name:"email",type:"email"},null,8,["modelValue","errorHelpLabel","isError"]),t(c,{type:"submit",loading:i.value,label:e.$t("labels.emailResetLink")},null,8,["loading","label"]),l("div",A,[l("span",U,m(e.$t("hints.backToLogin")),1),t(V,{to:"/login",activeClass:"border-b border-primary"},{default:a(()=>[t(c,{text:"",label:e.$t("labels.login")},null,8,["label"])]),_:1})])]}),_:1},8,["initialValues","resolver"])]),_:1})])}}});export{Y as default};
