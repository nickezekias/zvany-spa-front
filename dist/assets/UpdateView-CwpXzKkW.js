import{d as te,b as ne,a as de,r as b,o as ue,e as v,f as Z,j as s,w as g,q as me,m as pe,c as u,l as ce,h as t,i as y,s as be}from"./index-BImhoCNh.js";import{u as ve,P as ge}from"./product.store-BQzlJlVx.js";import{z as ye,a as o}from"./index-CdNGEnzP.js";import{N as Ve}from"./NikkToast-golMYRYC.js";import{N as fe,p as ke,_ as _e}from"./NikkTextArea.vue_vue_type_script_setup_true_lang-aa3cO_Px.js";import{_ as qe}from"./AppPageTitle.vue_vue_type_script_setup_true_lang-BncF4yxj.js";import{_ as V}from"./NikkInputNumber.vue_vue_type_script_setup_true_lang-Bvx0fNIu.js";import{_ as n}from"./NikkInputText.vue_vue_type_script_setup_true_lang-BDf6EFxy.js";import{_ as he}from"./NikkSelect.vue_vue_type_script_setup_true_lang-elfUupbF.js";import"./helpers-DSH885Z9.js";import"./index-D6rLUWe4.js";import"./index-LCMvfkJ-.js";import"./index-hPdjyGQz.js";const Fe={class:"nikk-container"},we={key:0,class:"flex"},xe={class:"flex flex-col md:flex-row gap-4"},Ue={class:"w-full lg:w-4/12"},Pe={class:"w-full flex flex-col lg:w-8/12 gap-4"},Ee={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Se={class:"flex justify-end pt-6 gap-4"},Ge=te({__name:"UpdateView",setup(Be){const f=ve(),$=me(),ee=pe(),re=ne(),{t:le}=de(),d=new Ve(re,le),m=b(!1),e=b(ge.initEmpty()),p=b(!1),ae=ye(o.object({barcode:o.string().min(1,{message:"errors.validation.requiredField"}),brand:o.string().min(1,{message:"errors.validation.requiredField"}),categories:o.string().min(1,{message:"errors.validation.requiredField"}),cost:o.union([o.number().min(0,{message:"errors.validation.requiredField"}),o.string().min(0,{message:"errors.validation.requiredField"})]),description:o.string().min(1,{message:"errors.validation.requiredField"}),name:o.string().min(1,{message:"errors.validation.requiredField"}),price:o.union([o.number().min(0,{message:"errors.validation.requiredField"}),o.string().min(0,{message:"errors.validation.requiredField"})]),quantity:o.union([o.number().min(0,{message:"errors.validation.requiredField"}),o.string().min(0,{message:"errors.validation.requiredField"})]),sku:o.string().min(1,{message:"errors.validation.requiredField"}),type:o.string().min(1,{message:"errors.validation.requiredField"})}));ue(async()=>{p.value=!0;try{const i=await f.get(`${$.params.id}`);e.value=i}catch(i){d.httpError(i)}finally{p.value=!1}});async function se(i){if(i.valid){m.value=!0;try{await f.update(e.value),d.success("features.vendors.products.update.successMessage"),ee.push({name:"vendors.products.index"})}catch(c){d.httpError(c)}finally{m.value=!1}}else d.error("errors.validation.form","labels.invalidForm")}return(i,r)=>{const c=u("PrimeSkeleton"),k=u("PrimeButton"),oe=u("router-link"),ie=u("PrimeCard");return v(),Z("div",Fe,[s(qe,{title:"features.vendors.products.update.title",subtitle:"features.vendors.products.update.subtitle"}),s(ie,null,{content:g(()=>[p.value?(v(),Z("div",we,[s(c,{width:"100%",height:"24rem"})])):(v(),ce(y(be),{key:1,initialValues:e.value,resolver:y(ae),onSubmit:se,validateOnBlur:!0,validateOnSubmit:!0},{default:g(a=>{var _,q,h,F,w,x,U,P,E,S,B,C,T,N,j,H,L,z,R,M,O,A,I,D,G,J,K,Q,W,X,Y;return[t("div",xe,[t("div",Ue,[s(fe,{class:"h-96 border",url:e.value.images?`${e.value.images}`:"",onFileSelected:r[0]||(r[0]=l=>{e.value.images=l})},null,8,["url"])]),t("div",Pe,[s(n,{modelValue:e.value.name,"onUpdate:modelValue":r[1]||(r[1]=l=>e.value.name=l),errorHelpLabel:(q=(_=a.name)==null?void 0:_.error)==null?void 0:q.message,id:"product-name",isError:(h=a.name)==null?void 0:h.invalid,label:"labels.name",name:"name",type:"text"},null,8,["modelValue","errorHelpLabel","isError"]),t("div",Ee,[s(n,{modelValue:e.value.sku,"onUpdate:modelValue":r[2]||(r[2]=l=>e.value.sku=l),id:"sku","error-help-label":(w=(F=a.sku)==null?void 0:F.error)==null?void 0:w.message,"is-error":(x=a.sku)==null?void 0:x.invalid,label:"labels.sku",name:"sku",type:"text"},null,8,["modelValue","error-help-label","is-error"]),s(n,{modelValue:e.value.barcode,"onUpdate:modelValue":r[3]||(r[3]=l=>e.value.barcode=l),id:"barcode","error-help-label":(P=(U=a.barcode)==null?void 0:U.error)==null?void 0:P.message,"is-error":(E=a.barcode)==null?void 0:E.invalid,label:"labels.barcode",name:"barcode",type:"text"},null,8,["modelValue","error-help-label","is-error"]),s(he,{modelValue:e.value.type,"onUpdate:modelValue":r[4]||(r[4]=l=>e.value.type=l),id:"type","error-help-label":(B=(S=a.type)==null?void 0:S.error)==null?void 0:B.message,hint:"labels.selectProductType","is-error":(C=a.type)==null?void 0:C.invalid,label:"labels.productType",name:"type",options:y(ke),placeholder:"labels.selectProductType"},null,8,["modelValue","error-help-label","is-error","options"]),s(n,{modelValue:e.value.brand,"onUpdate:modelValue":r[5]||(r[5]=l=>e.value.brand=l),id:"brand","error-help-label":(N=(T=a.brand)==null?void 0:T.error)==null?void 0:N.message,"is-error":(H=(j=a.brand)==null?void 0:j.error)==null?void 0:H.message,label:"labels.brand",name:"brand",type:"text"},null,8,["modelValue","error-help-label","is-error"]),s(n,{modelValue:e.value.categories,"onUpdate:modelValue":r[6]||(r[6]=l=>e.value.categories=l),id:"categories","error-help-label":(z=(L=a.categories)==null?void 0:L.error)==null?void 0:z.message,"is-error":(R=a.categories)==null?void 0:R.invalid,label:"labels.categories",name:"categories",type:"text"},null,8,["modelValue","error-help-label","is-error"]),s(V,{modelValue:e.value.quantity,"onUpdate:modelValue":r[7]||(r[7]=l=>e.value.quantity=l),id:"quantity","error-help-label":(O=(M=a.quantity)==null?void 0:M.error)==null?void 0:O.message,"is-error":(A=a.quantity)==null?void 0:A.invalid,label:"labels.quantity",min:0,name:"quantity","show-buttons":!0},null,8,["modelValue","error-help-label","is-error"]),s(V,{modelValue:e.value.cost,"onUpdate:modelValue":r[8]||(r[8]=l=>e.value.cost=l),id:"cost","error-help-label":(D=(I=a.cost)==null?void 0:I.error)==null?void 0:D.message,"is-error":(G=a.cost)==null?void 0:G.invalid,label:"labels.cost",min:0,name:"cost","show-buttons":!0},null,8,["modelValue","error-help-label","is-error"]),s(V,{modelValue:e.value.price,"onUpdate:modelValue":r[9]||(r[9]=l=>e.value.price=l),id:"price","error-help-label":(K=(J=a.price)==null?void 0:J.error)==null?void 0:K.message,"is-error":(Q=a.price)==null?void 0:Q.invalid,label:"labels.price",min:0,name:"price","show-buttons":!0},null,8,["modelValue","error-help-label","is-error"])]),s(_e,{modelValue:e.value.description,"onUpdate:modelValue":r[10]||(r[10]=l=>e.value.description=l),errorHelpLabel:(X=(W=a.description)==null?void 0:W.error)==null?void 0:X.message,hint:"features.vendors.products.create.descriptionHint",id:"description",isError:(Y=a.description)==null?void 0:Y.invalid,label:"labels.description",name:"description"},null,8,["modelValue","errorHelpLabel","isError"]),t("div",Se,[s(oe,{to:"/vendors/products"},{default:g(()=>[s(k,{text:"",label:i.$t("labels.cancel")},null,8,["label"])]),_:1}),s(k,{type:"submit",loading:m.value,label:i.$t("labels.save")},null,8,["loading","label"])])])])]}),_:1},8,["initialValues","resolver"]))]),_:1})])}}});export{Ge as default};
