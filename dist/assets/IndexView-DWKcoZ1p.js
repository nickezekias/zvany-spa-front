import{z as $,a as c}from"./index-BXVFKw3L.js";import{d as H,p as V,u as q,r as y,b as L,a as R,c as j,e as z,i as t,w as a,g as r,t as m,h as k,n as A,q as T,k as d,s as I}from"./index-TzZah-E4.js";import{_ as O}from"./NikkInputText.vue_vue_type_script_setup_true_lang-C4JC_fEl.js";import{_ as D}from"./NikkInputPassword.vue_vue_type_script_setup_true_lang-DbuqMMnb.js";import{N as M}from"./NikkToast-J5MSWPIm.js";import"./index-Dj5bUBQz.js";import"./helpers-B5xRNGEM.js";const G={class:"w-full p-3 overflow-y-auto"},J={class:"text-center text-3xl md:text-4xl font-light mb-0"},K={class:"flex items-center justify-center"},Q={class:"font-light text-sm me-1"},U={class:"flex items-center justify-center"},W={class:"font-light text-sm me-1"},oe=H({__name:"IndexView",setup(X){const x=V(),C=q(),l=y(!1),u=A(),p=T(),S=L(),{t:F}=R(),i=new M(S,F),B=y({email:"",password:""}),E=$(c.object({email:c.string().email({message:"errors.validation.email"}),password:c.string().min(1,{message:"errors.validation.requiredField"})}));async function N(e){var n;l.value=!0;try{e.valid?(await C.login(e.values),p.query.redirect?u.push(`${p.query.redirect}`):u.push(x.homeRoute)):i.error("errors.validation.form","labels.invalidForm")}catch(s){((n=s==null?void 0:s.response)==null?void 0:n.status)==422?i.error("messages.credentialsNotFound","labels.loginFailed"):i.httpError(s)}finally{l.value=!1}}return(e,n)=>{const s=d("PrimeButton"),f=d("router-link"),P=d("PrimeCard");return j(),z("div",G,[t(P,{class:"w-full md:w-4/12 2xl:w-3/12 mx-auto mt-10 nikk-card"},{title:a(()=>[r("div",null,[r("h1",J,m(e.$t("labels.login")),1),r("div",K,[r("span",Q,m(e.$t("hints.doNotHaveAccount")),1),t(f,{to:"/register",activeClass:"border-b border-primary"},{default:a(()=>[t(s,{text:"",label:e.$t("labels.register")},null,8,["label"])]),_:1})])])]),content:a(()=>[t(k(I),{class:"py-3 flex flex-col gap-5",initialValues:B.value,onSubmit:N,resolver:k(E),validateOnBlur:!0,validateOnSubmit:!0},{default:a(o=>{var b,_,v,g,h,w;return[t(O,{errorHelpLabel:(_=(b=o.email)==null?void 0:b.error)==null?void 0:_.message,id:"email",isError:(v=o.email)==null?void 0:v.invalid,label:"labels.email",name:"email",type:"email"},null,8,["errorHelpLabel","isError"]),t(D,{errorHelpLabel:(h=(g=o.password)==null?void 0:g.error)==null?void 0:h.message,id:"password",isError:(w=o.password)==null?void 0:w.invalid,label:"labels.password",name:"password",toggleMask:!0,feedback:!1},null,8,["errorHelpLabel","isError"]),r("div",U,[r("span",W,m(e.$t("hints.forgotPassword")),1),t(f,{to:"/forgot-password",activeClass:"border-b border-primary"},{default:a(()=>[t(s,{text:"",severity:"danger",label:e.$t("labels.resetPassword")},null,8,["label"])]),_:1})]),t(s,{type:"submit",loading:l.value,label:e.$t("labels.login")},null,8,["loading","label"])]}),_:1},8,["initialValues","resolver"])]),_:1})])}}});export{oe as default};
