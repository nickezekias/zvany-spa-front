import{S as $,V as K,d as M,u as O,b as Q,a as R,r as c,W as X,c as h,e as N,l as Y,i as o,g as r,t as y,w as p,k as v,_ as Z}from"./index-DRnyeG6s.js";import{N as ee}from"./NikkToast-J5MSWPIm.js";import{_ as se}from"./AppPageTitle.vue_vue_type_script_setup_true_lang-DxKTaOqs.js";import{N as D}from"./NikkAvatarUpload-DizMwvhs.js";import{_ as g}from"./NikkInputText.vue_vue_type_script_setup_true_lang-B3mRpk61.js";import"./helpers-B5xRNGEM.js";import"./index-U2ik_GpQ.js";const T="api/v1/businesses",ae=async function(n){const t=new FormData;return t.append("coverImage",n.coverImage),$.post(`${T}/${n.id}/cover-image?_method=PUT`,t)},oe=async function(n){const t=new FormData;return t.append("logo",n.logo),$.post(`${T}/${n.id}/logo?_method=PUT`,t)},U={updateCoverImage:ae,updateLogo:oe},le=K("businessStore",()=>{async function n(u){await U.updateCoverImage(u)}async function t(u){await U.updateLogo(u)}return{updateCoverImage:n,updateLogo:t}}),te={key:1,class:"nikk-container"},re={class:"content"},ne={class:"flex flex-col md:flex-row md:justify-between items-center gap-4 md:gap-6 mt-6"},ie={class:"flex-grow"},ue={class:"text-muted-color font-thin mb-2"},de={class:"h-full flex"},me={class:"w-64"},ce={class:"text-muted-color font-thin mb-2 text-cente"},pe={class:"h-full flex"},ve=M({__name:"IndexView",setup(n){var S;const t=O(),u=le(),j=Q(),{t:m}=R(),d=new ee(j,m),f=c(!1),b=c(!1),q=c(!1),e=c(((S=t.user)==null?void 0:S.business)||X.initEmpty());async function A(){f.value=!0;try{if(!e.value.coverImage){d.error("errors.validation.requiredField",m("features.businesses.changeStoreCoverImage"));return}await u.updateCoverImage(e.value),d.success("messages.updatedSuccessfully")}catch(l){d.httpError(l)}finally{f.value=!1}}async function W(){b.value=!0;try{if(!e.value.logo){d.error(m("errors.validation.requiredField"),m("features.businesses.changeStoreLogo"));return}await u.updateLogo(e.value),d.success("messages.updatedSuccessfully")}catch(l){d.httpError(l)}finally{b.value=!1}}return(l,s)=>{const z=v("PrimeSkeleton"),_=v("PrimeButton"),G=v("PrimeForm"),J=v("PrimeCard");return h(),N("div",null,[q.value?(h(),Y(z,{key:0,width:"100%",height:"80%"})):(h(),N("div",te,[o(se,{title:"features.businesses.businessSettings",subtitle:"features.businesses.businessSettingsDesc"}),r("div",re,[r("div",ne,[r("div",ie,[r("h3",ue,y(l.$t("features.businesses.changeStoreCoverImage")),1),o(D,{class:"h-48 border w-full",url:e.value.coverImage?`${e.value.coverImage}`:"",onFileSelected:s[0]||(s[0]=a=>{e.value.coverImage=a})},null,8,["url"]),r("div",de,[o(_,{onClick:A,class:"mt-2 ml-auto",loading:f.value,outlined:"",type:"submit",label:l.$t("features.businesses.updateCoverImage")},null,8,["loading","label"])])]),r("div",me,[r("h3",ce,y(l.$t("features.businesses.changeStoreLogo")),1),o(D,{class:"border",url:e.value.logo?`${e.value.logo}`:"",onFileSelected:s[1]||(s[1]=a=>{e.value.logo=a})},null,8,["url"]),r("div",pe,[o(_,{onClick:W,class:"mt-2 ml-auto",loading:b.value,outlined:"",type:"submit",label:l.$t("features.businesses.updateLogo")},null,8,["loading","label"])])])]),o(J,{class:"store-details mt-16 border w-full md:w-5/12 lg:w-4/12 md:mx-auto"},{title:p(()=>[r("span",null,y(l.$t("features.businesses.storeDetails")),1)]),content:p(()=>[o(G,{initialValues:e.value,class:"flex flex-col gap-5"},{default:p(a=>{var w,I,L,V,k,x,C,E,P,B,F,H;return[o(g,{modelValue:e.value.name,"onUpdate:modelValue":s[2]||(s[2]=i=>e.value.name=i),errorHelpLabel:(I=(w=a.name)==null?void 0:w.error)==null?void 0:I.message,id:"last-name",isError:(L=a.name)==null?void 0:L.invalid,label:"labels.lastName",name:"lastName",type:"text"},null,8,["modelValue","errorHelpLabel","isError"]),o(g,{modelValue:e.value.email,"onUpdate:modelValue":s[3]||(s[3]=i=>e.value.email=i),errorHelpLabel:(k=(V=a.email)==null?void 0:V.error)==null?void 0:k.message,id:"email",isError:(x=a.email)==null?void 0:x.invalid,label:"labels.email",name:"email",type:"email"},null,8,["modelValue","errorHelpLabel","isError"]),o(g,{modelValue:e.value.phone,"onUpdate:modelValue":s[4]||(s[4]=i=>e.value.phone=i),errorHelpLabel:(E=(C=a.phone)==null?void 0:C.error)==null?void 0:E.message,id:"phone",isError:(P=a.phone)==null?void 0:P.invalid,label:"labels.phone",name:"phone",type:"text"},null,8,["modelValue","errorHelpLabel","isError"]),o(g,{modelValue:e.value.address,"onUpdate:modelValue":s[5]||(s[5]=i=>e.value.address=i),errorHelpLabel:(F=(B=a.address)==null?void 0:B.error)==null?void 0:F.message,id:"address",isError:(H=a.address)==null?void 0:H.invalid,label:"labels.address",name:"address",type:"text"},null,8,["modelValue","errorHelpLabel","isError"])]}),_:1},8,["initialValues"])]),footer:p(()=>[o(_,{class:"mt-6",fluid:"",type:"submit",label:l.$t("labels.edit")},null,8,["label"])]),_:1})])]))])}}}),we=Z(ve,[["__scopeId","data-v-7116f47d"]]);export{we as default};
