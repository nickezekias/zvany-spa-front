import{d as le,u as ae,b as se,a as oe,r as v,o as te,e as ie,f as ne,j as s,w as b,q as ue,m as de,c as g,i as y,s as me,h as n}from"./index-D5Cyua4Z.js";import{u as pe,P as ce}from"./product.store-0iKI7TGl.js";import{z as ve,a as o}from"./index-D2oITjyK.js";import{N as be}from"./NikkToast-golMYRYC.js";import{N as ge,p as ye,_ as Ve}from"./NikkTextArea.vue_vue_type_script_setup_true_lang-BHmhUc82.js";import{_ as fe}from"./AppPageTitle.vue_vue_type_script_setup_true_lang-BvlipfMZ.js";import{_ as V}from"./NikkInputNumber.vue_vue_type_script_setup_true_lang-CAyC2iRc.js";import{_ as m}from"./NikkInputText.vue_vue_type_script_setup_true_lang-DGBmKUo9.js";import{_ as _e}from"./NikkSelect.vue_vue_type_script_setup_true_lang-nT0g6Dou.js";import"./helpers-DSH885Z9.js";import"./index-DpP2zLcQ.js";import"./index-DnBzA2nl.js";import"./index-Duh8cuLS.js";const qe={class:"nikk-container"},ke={class:"flex flex-col md:flex-row gap-4"},Fe={class:"w-full lg:w-4/12"},he={class:"w-full flex flex-col lg:w-8/12 gap-4"},we={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},xe={class:"flex justify-end pt-6 gap-4"},Ae=le({__name:"CreateView",setup(Ue){const W=ae(),f=pe(),X=ue(),Y=de(),Z=se(),{t:$}=oe(),u=new be(Z,$),p=v(!1),e=v(ce.initEmpty()),_=v(!1),ee=ve(o.object({brand:o.string().min(1,{message:"errors.validation.requiredField"}),categories:o.string().min(1,{message:"errors.validation.requiredField"}),cost:o.union([o.number().min(0,{message:"errors.validation.requiredField"}),o.string().min(0,{message:"errors.validation.requiredField"})]),description:o.string().min(1,{message:"errors.validation.requiredField"}),name:o.string().min(1,{message:"errors.validation.requiredField"}),price:o.union([o.number().min(0,{message:"errors.validation.requiredField"}),o.string().min(0,{message:"errors.validation.requiredField"})]),quantity:o.union([o.number().min(0,{message:"errors.validation.requiredField"}),o.string().min(0,{message:"errors.validation.requiredField"})]),sku:o.string().min(1,{message:"errors.validation.requiredField"}),type:o.string().min(1,{message:"errors.validation.requiredField"})}));te(async()=>{const t=X.query.cloneId;if(t&&t.length==36){_.value=!0;try{e.value=await f.get(`${t}`),e.value.images=""}catch(r){u.httpError(r)}finally{_.value=!1}}});async function re(t){var i,d;if(t.valid){p.value=!0;try{e.value.barcode=e.value.sku,e.value.businessId=`${(d=(i=W.user)==null?void 0:i.business)==null?void 0:d.id}`,await f.create(e.value),u.success("features.vendors.products.create.successMessage"),Y.push({name:"vendors.products.index"})}catch(c){u.httpError(c)}finally{p.value=!1}}else u.error("errors.validation.form","labels.invalidForm")}return(t,r)=>{const i=g("PrimeButton"),d=g("router-link"),c=g("PrimeCard");return ie(),ne("div",qe,[s(fe,{title:"features.vendors.products.create.title",subtitle:"features.vendors.products.create.subtitle"}),s(c,{class:"vendor-card"},{content:b(()=>[s(y(me),{initialValues:e.value,resolver:y(ee),onSubmit:re,validateOnBlur:!0,validateOnSubmit:!0},{default:b(a=>{var q,k,F,h,w,x,U,P,C,E,S,T,B,N,j,H,L,I,z,R,A,M,O,D,G,J,K,Q;return[n("div",ke,[n("div",Fe,[s(ge,{class:"h-96 border",onFileSelected:r[0]||(r[0]=l=>{e.value.images=l})})]),n("div",he,[s(m,{modelValue:e.value.name,"onUpdate:modelValue":r[1]||(r[1]=l=>e.value.name=l),errorHelpLabel:(k=(q=a.name)==null?void 0:q.error)==null?void 0:k.message,id:"product-name",isError:(F=a.name)==null?void 0:F.invalid,label:"labels.name",name:"name",type:"text"},null,8,["modelValue","errorHelpLabel","isError"]),n("div",we,[s(m,{modelValue:e.value.sku,"onUpdate:modelValue":r[2]||(r[2]=l=>e.value.sku=l),id:"sku","error-help-label":(w=(h=a.sku)==null?void 0:h.error)==null?void 0:w.message,"is-error":(x=a.sku)==null?void 0:x.invalid,label:"labels.sku",name:"sku",type:"text"},null,8,["modelValue","error-help-label","is-error"]),s(_e,{modelValue:e.value.type,"onUpdate:modelValue":r[3]||(r[3]=l=>e.value.type=l),id:"type","error-help-label":(P=(U=a.type)==null?void 0:U.error)==null?void 0:P.message,hint:"labels.selectProductType","is-error":(C=a.type)==null?void 0:C.invalid,label:"labels.productType",name:"type",options:y(ye),placeholder:"labels.selectProductType"},null,8,["modelValue","error-help-label","is-error","options"]),s(m,{modelValue:e.value.brand,"onUpdate:modelValue":r[4]||(r[4]=l=>e.value.brand=l),id:"brand","error-help-label":(S=(E=a.brand)==null?void 0:E.error)==null?void 0:S.message,"is-error":(B=(T=a.brand)==null?void 0:T.error)==null?void 0:B.message,label:"labels.brand",name:"brand",type:"text"},null,8,["modelValue","error-help-label","is-error"]),s(m,{modelValue:e.value.categories,"onUpdate:modelValue":r[5]||(r[5]=l=>e.value.categories=l),id:"categories","error-help-label":(j=(N=a.categories)==null?void 0:N.error)==null?void 0:j.message,"is-error":(H=a.categories)==null?void 0:H.invalid,label:"labels.categories",name:"categories",type:"text"},null,8,["modelValue","error-help-label","is-error"]),s(V,{modelValue:e.value.quantity,"onUpdate:modelValue":r[6]||(r[6]=l=>e.value.quantity=l),id:"quantity","error-help-label":(I=(L=a.quantity)==null?void 0:L.error)==null?void 0:I.message,"is-error":(z=a.quantity)==null?void 0:z.invalid,label:"labels.quantity",min:0,name:"quantity","show-buttons":!0},null,8,["modelValue","error-help-label","is-error"]),s(V,{modelValue:e.value.cost,"onUpdate:modelValue":r[7]||(r[7]=l=>e.value.cost=l),id:"cost","error-help-label":(A=(R=a.cost)==null?void 0:R.error)==null?void 0:A.message,"is-error":(M=a.cost)==null?void 0:M.invalid,label:"labels.cost",min:0,name:"cost","show-buttons":!0},null,8,["modelValue","error-help-label","is-error"]),s(V,{modelValue:e.value.price,"onUpdate:modelValue":r[8]||(r[8]=l=>e.value.price=l),id:"price","error-help-label":(D=(O=a.price)==null?void 0:O.error)==null?void 0:D.message,"is-error":(G=a.price)==null?void 0:G.invalid,label:"labels.price",min:0,name:"price","show-buttons":!0},null,8,["modelValue","error-help-label","is-error"])]),s(Ve,{modelValue:e.value.description,"onUpdate:modelValue":r[9]||(r[9]=l=>e.value.description=l),errorHelpLabel:(K=(J=a.description)==null?void 0:J.error)==null?void 0:K.message,hint:"features.vendors.products.create.descriptionHint",id:"description",isError:(Q=a.description)==null?void 0:Q.invalid,label:"labels.description",name:"description"},null,8,["modelValue","errorHelpLabel","isError"]),n("div",xe,[s(d,{to:"/vendors/products"},{default:b(()=>[s(i,{text:"",label:t.$t("labels.cancel")},null,8,["label"])]),_:1}),s(i,{type:"submit",loading:p.value,label:t.$t("labels.save")},null,8,["loading","label"])])])])]}),_:1},8,["initialValues","resolver"])]),_:1})])}}});export{Ae as default};
