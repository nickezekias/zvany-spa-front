import{d as ee,u as re,b as le,a as ae,r as J,e as se,f as oe,j as s,w as b,m as ie,c as v,i as g,s as te,h as t}from"./index-BPrxbv2d.js";import{u as ne,P as de}from"./product.store-CoCRkDQI.js";import{z as ue,a as o}from"./index-DEigQNDt.js";import{N as me}from"./NikkToast-9IN1bXi5.js";import{N as pe,p as ce,_ as be}from"./NikkTextArea.vue_vue_type_script_setup_true_lang-BpAUQlUS.js";import{_ as ve}from"./AppPageTitle.vue_vue_type_script_setup_true_lang-Bu4y6e2N.js";import{_ as V}from"./NikkInputNumber.vue_vue_type_script_setup_true_lang-C5AWVxbj.js";import{_ as u}from"./NikkInputText.vue_vue_type_script_setup_true_lang-zfGqtmag.js";import{_ as ge}from"./NikkSelect.vue_vue_type_script_setup_true_lang-XXSePesh.js";import"./helpers-CXetX1G_.js";import"./index-B9TPW_Vy.js";import"./index-C8CdGtcY.js";import"./index-CPRQtbFj.js";const Ve={class:"nikk-container"},ye={class:"flex flex-col md:flex-row gap-4"},fe={class:"w-full lg:w-4/12"},_e={class:"w-full flex flex-col lg:w-8/12 gap-4"},ke={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},qe={class:"flex justify-end pt-6 gap-4"},Le=ee({__name:"CreateView",setup(Fe){const K=re(),Q=ne(),W=ie(),X=le(),{t:Y}=ae(),m=new me(X,Y),p=J(!1),e=J(de.initEmpty()),Z=ue(o.object({brand:o.string().min(1,{message:"errors.validation.requiredField"}),categories:o.string().min(1,{message:"errors.validation.requiredField"}),cost:o.union([o.number().min(0,{message:"errors.validation.requiredField"}),o.string().min(0,{message:"errors.validation.requiredField"})]),description:o.string().min(1,{message:"errors.validation.requiredField"}),name:o.string().min(1,{message:"errors.validation.requiredField"}),price:o.union([o.number().min(0,{message:"errors.validation.requiredField"}),o.string().min(0,{message:"errors.validation.requiredField"})]),quantity:o.union([o.number().min(0,{message:"errors.validation.requiredField"}),o.string().min(0,{message:"errors.validation.requiredField"})]),sku:o.string().min(1,{message:"errors.validation.requiredField"}),type:o.string().min(1,{message:"errors.validation.requiredField"})}));async function $(n){var i,d;if(n.valid){p.value=!0;try{e.value.barcode=e.value.sku,e.value.businessId=`${(d=(i=K.user)==null?void 0:i.business)==null?void 0:d.id}`,await Q.create(e.value),m.success("features.vendors.products.create.successMessage"),W.push({name:"vendors.products.index"})}catch(c){m.httpError(c)}finally{p.value=!1}}else m.error("errors.validation.form","labels.invalidForm")}return(n,r)=>{const i=v("PrimeButton"),d=v("router-link"),c=v("PrimeCard");return se(),oe("div",Ve,[s(ve,{title:"features.vendors.products.create.title",subtitle:"features.vendors.products.create.subtitle"}),s(c,{class:"vendor-card"},{content:b(()=>[s(g(te),{initialValues:e.value,resolver:g(Z),onSubmit:$,validateOnBlur:!0,validateOnSubmit:!0},{default:b(a=>{var y,f,_,k,q,F,h,w,x,U,P,C,S,E,T,B,N,j,H,L,z,A,I,O,R,M,D,G;return[t("div",ye,[t("div",fe,[s(pe,{class:"h-96 border",onFileSelected:r[0]||(r[0]=l=>{e.value.images=l})})]),t("div",_e,[s(u,{modelValue:e.value.name,"onUpdate:modelValue":r[1]||(r[1]=l=>e.value.name=l),errorHelpLabel:(f=(y=a.name)==null?void 0:y.error)==null?void 0:f.message,id:"product-name",isError:(_=a.name)==null?void 0:_.invalid,label:"labels.name",name:"name",type:"text"},null,8,["modelValue","errorHelpLabel","isError"]),t("div",ke,[s(u,{modelValue:e.value.sku,"onUpdate:modelValue":r[2]||(r[2]=l=>e.value.sku=l),id:"sku","error-help-label":(q=(k=a.sku)==null?void 0:k.error)==null?void 0:q.message,"is-error":(F=a.sku)==null?void 0:F.invalid,label:"labels.sku",name:"sku",type:"text"},null,8,["modelValue","error-help-label","is-error"]),s(ge,{modelValue:e.value.type,"onUpdate:modelValue":r[3]||(r[3]=l=>e.value.type=l),id:"type","error-help-label":(w=(h=a.type)==null?void 0:h.error)==null?void 0:w.message,hint:"labels.selectProductType","is-error":(x=a.type)==null?void 0:x.invalid,label:"labels.productType",name:"type",options:g(ce),placeholder:"labels.selectProductType"},null,8,["modelValue","error-help-label","is-error","options"]),s(u,{modelValue:e.value.brand,"onUpdate:modelValue":r[4]||(r[4]=l=>e.value.brand=l),id:"brand","error-help-label":(P=(U=a.brand)==null?void 0:U.error)==null?void 0:P.message,"is-error":(S=(C=a.brand)==null?void 0:C.error)==null?void 0:S.message,label:"labels.brand",name:"brand",type:"text"},null,8,["modelValue","error-help-label","is-error"]),s(u,{modelValue:e.value.categories,"onUpdate:modelValue":r[5]||(r[5]=l=>e.value.categories=l),id:"categories","error-help-label":(T=(E=a.categories)==null?void 0:E.error)==null?void 0:T.message,"is-error":(B=a.categories)==null?void 0:B.invalid,label:"labels.categories",name:"categories",type:"text"},null,8,["modelValue","error-help-label","is-error"]),s(V,{modelValue:e.value.quantity,"onUpdate:modelValue":r[6]||(r[6]=l=>e.value.quantity=l),id:"quantity","error-help-label":(j=(N=a.quantity)==null?void 0:N.error)==null?void 0:j.message,"is-error":(H=a.quantity)==null?void 0:H.invalid,label:"labels.quantity",min:0,name:"quantity","show-buttons":!0},null,8,["modelValue","error-help-label","is-error"]),s(V,{modelValue:e.value.cost,"onUpdate:modelValue":r[7]||(r[7]=l=>e.value.cost=l),id:"cost","error-help-label":(z=(L=a.cost)==null?void 0:L.error)==null?void 0:z.message,"is-error":(A=a.cost)==null?void 0:A.invalid,label:"labels.cost",min:0,name:"cost","show-buttons":!0},null,8,["modelValue","error-help-label","is-error"]),s(V,{modelValue:e.value.price,"onUpdate:modelValue":r[8]||(r[8]=l=>e.value.price=l),id:"price","error-help-label":(O=(I=a.price)==null?void 0:I.error)==null?void 0:O.message,"is-error":(R=a.price)==null?void 0:R.invalid,label:"labels.price",min:0,name:"price","show-buttons":!0},null,8,["modelValue","error-help-label","is-error"])]),s(be,{modelValue:e.value.description,"onUpdate:modelValue":r[9]||(r[9]=l=>e.value.description=l),errorHelpLabel:(D=(M=a.description)==null?void 0:M.error)==null?void 0:D.message,hint:"features.vendors.products.create.descriptionHint",id:"description",isError:(G=a.description)==null?void 0:G.invalid,label:"labels.description",name:"description"},null,8,["modelValue","errorHelpLabel","isError"]),t("div",qe,[s(d,{to:"/vendors/products"},{default:b(()=>[s(i,{text:"",label:n.$t("labels.cancel")},null,8,["label"])]),_:1}),s(i,{type:"submit",loading:p.value,label:n.$t("labels.save")},null,8,["loading","label"])])])])]}),_:1},8,["initialValues","resolver"])]),_:1})])}}});export{Le as default};
